/*
First time? Check out the tutorial game:
https://sprig.hackclub.com/gallery/getting_started

@title: Sound Memory
@author: meronemo
@tags: []
@addedOn: 2024-07-28
*/

const boxa = "a";
const boxb = "b";
const boxc = "c";
const boxd = "d";
const sela = "q";
const selb = "w";
const selc = "e";
const seld = "r";

setLegend(
  [boxa, bitmap`
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333
3333333333333333`],
  [boxb, bitmap`
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666
6666666666666666`],
  [boxc, bitmap`
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444
4444444444444444`],
  [boxd, bitmap`
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777
7777777777777777`],
  [sela, bitmap`
3333333333333333
3333333333333333
3333333333333333
3303333333333033
3330333333330333
3330333333330333
3333033333303333
3333033333303333
3333303333033333
3333303333033333
3333330330333333
3333330330333333
3333333003333333
3333333333333333
3333333333333333
3333333333333333`],
  [selb, bitmap`
6666666666666666
6666666666666666
6666666666666666
6606666666666066
6660666666660666
6660666666660666
6666066666606666
6666066666606666
6666606666066666
6666606666066666
6666660660666666
6666660660666666
6666666006666666
6666666666666666
6666666666666666
6666666666666666`],
  [selc, bitmap`
4444444444444444
4444444444444444
4444444444444444
4404444444444044
4440444444440444
4440444444440444
4444044444404444
4444044444404444
4444404444044444
4444404444044444
4444440440444444
4444440440444444
4444444004444444
4444444444444444
4444444444444444
4444444444444444`],
  [seld, bitmap`
7777777777777777
7777777777777777
7777777777777777
7707777777777077
7770777777770777
7770777777770777
7777077777707777
7777077777707777
7777707777077777
7777707777077777
7777770770777777
7777770770777777
7777777007777777
7777777777777777
7777777777777777
7777777777777777`],
);

const level = map`
.a.
b.d
.c.`;

setMap(level);

onInput("s", () => {
  getFirst(player).y += 1
});

afterInput(() => {

});

const sound = [];
let round = 0;

const sounda = tune`
500: B5-500,
15500`;
const soundb = tune`
500: E5-500,
15500`;
const soundc = tune`
500: G4-500,
15500`;
const soundd = tune`
500: C4-500,
15500`;

function nextRound() {
  round += 1;
  const random = Math.floor(Math.random() * 4) + 1;
  sound.push(random);
  console.log(sound);
  
  clearText();
  addText("R" + String(round), { y: 7, color: color`0` });

  for (let i=0; i<sound.length; i++) {
    if (sound[i] === 1) {
      playTune(sounda);
      getFirst(boxa).type = sela;
    } else if (sound[i] === 2) {
      playTune(soundb);
      getFirst(boxb).type = selb;
    } else if (sound[i] === 3) {
      playTune(soundc);
      getFirst(boxc).type = selc;
    } else if (sound[i] === 4) {
      playTune(soundd);
      getFirst(boxd).type = seld;
    }
  }
}
nextRound();